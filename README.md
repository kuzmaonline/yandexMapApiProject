# Скрипт для получения координат из Google Sheets

Этот скрипт получает данные о координатах из Google Sheets и сохраняет их в формате JavaScript для использования на веб-странице.

## Установка

1. Клонируйте репозиторий

2. Создайте и активируйте виртуальное окружение:
```bash
# Создание виртуального окружения
python3 -m venv venv

# Активация виртуального окружения
# Для macOS/Linux:
source venv/bin/activate
# Для Windows:
# venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` на основе `.env.example` и заполните необходимые переменные окружения:
```bash
cp .env.example .env
```

## Использование

1. Убедитесь, что виртуальное окружение активировано:
```bash
# Для macOS/Linux:
source venv/bin/activate
# Для Windows:
# venv\Scripts\activate
```

2. Запустите скрипт для получения данных:
```bash
python fetch_coordinates.py
```

3. Откройте веб-интерфейс:
   - Запустите любой веб-сервер в директории `static`
   - Откройте `index.html` в браузере

Скрипт выполнит следующие действия:
1. Получит данные из Google Sheets
2. Обработает координаты
3. Сохранит результат в файл `static/data/coordinates.js`

## Веб-интерфейс

Веб-интерфейс предоставляет следующие возможности:
- Отображение объектов на карте Яндекс.Карт
- Фильтрация объектов по статусу
- Поиск по названию сделки
- Цветовая индикация статусов:
  - Зеленый: статус 142
  - Серый: статус 143
  - Синий: остальные статусы

## Структура проекта

- `fetch_coordinates.py` - основной скрипт
- `config.py` - конфигурация проекта
- `utils.py` - вспомогательные функции
- `cache.py` - работа с кэшем
- `requirements.txt` - зависимости проекта
- `.env` - переменные окружения (не включен в репозиторий)
- `venv/` - виртуальное окружение Python (не включено в репозиторий)
- `static/` - директория с веб-интерфейсом
  - `index.html` - веб-страница с картой
  - `data/` - директория с данными
    - `coordinates.js` - файл с координатами
    - `cache.json` - файл кэша

## Логирование

Логи сохраняются в директории `logs/fetch_coordinates.log`

## Кэширование

Скрипт использует кэширование для уменьшения количества запросов к API. 
Кэш хранится в `static/data/cache.json` и обновляется каждый час. 